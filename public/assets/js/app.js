const focusId=queryAll(".focus-id"),saveFolder=queryAll(".save-folder"),delFolderContent=queryAll(".del-folder-content"),delFolder=queryAll(".del-folder"),delVotingOption=queryAll(".del-voting-option"),addProfile=queryAll(".add-profile"),postRecommend=queryAll(".post-recommend"),typeAction=queryAll(".type-action");focusId.forEach(el=>el.addEventListener("click",function(e){makeRequest("/focus",options={body:"content_id="+el.dataset.id+"&type="+el.dataset.type+"&_token="+token})}));saveFolder.forEach(el=>el.addEventListener("click",function(e){makeRequest("/folder/content/save",options={body:"id="+el.dataset.id+"&type="+el.dataset.type+"&tid="+el.dataset.tid+"&_token="+token})}));addProfile.forEach(el=>el.addEventListener("click",function(e){makeRequest("/post/profile",options={body:"post_id="+el.dataset.post+"&_token="+token})}));delFolderContent.forEach(el=>el.addEventListener("click",function(e){makeRequest("/folder/content/del",options={body:"id="+el.dataset.id+"&type="+el.dataset.type+"&tid="+el.dataset.tid+"&_token="+token})}));delFolder.forEach(el=>el.addEventListener("click",function(e){makeRequest("/folder/del",options={body:"id="+el.dataset.id+"&type="+el.dataset.type+"&_token="+token})}));postRecommend.forEach(el=>el.addEventListener("click",function(e){makeRequest("/post/recommend",options={body:"post_id="+el.dataset.id+"&_token="+token})}));typeAction.forEach(el=>el.addEventListener("click",function(e){makeRequest("/status/action",options={body:"content_id="+el.dataset.id+"&type="+el.dataset.type+"&_token="+token})}));isIdEmpty('colorPicker').onclick=function(){let box=getById("box");let color=getById("color");box.style.borderColor=colorPicker.value;colorPicker.addEventListener("input",function(event){box.style.borderColor=event.target.value},!1);colorPicker.addEventListener("change",function(event){color.value=colorPicker.value},!1)}
queryAll(".up-id").forEach(el=>el.addEventListener("click",function(e){fetch("/votes",{method:"POST",body:"content_id="+el.dataset.id+"&type="+el.dataset.type+"&_token="+token,headers:{'Content-Type':'application/x-www-form-urlencoded'}}).then((response)=>{return}).then((text)=>{let upVot=document.querySelector('#up'+el.dataset.id);let act=upVot.classList.contains('active');let upScr=upVot.querySelector('.score');let number=parseInt(upScr.innerText);if(!number){number=0}
if(act==!0){new_cont=(number-parseInt(1))}else{new_cont=(number+parseInt(1))}
upVot.classList.toggle('active');upScr.innerHTML=new_cont})}));queryAll(".add-favorite").forEach(el=>el.addEventListener("click",function(e){fetch("/favorite",{method:"POST",headers:{'Content-Type':'application/x-www-form-urlencoded'},body:"content_id="+el.dataset.id+"&type="+el.dataset.type+"&_token="+token,}).then(response=>response.text()).then(text=>{if(el.dataset.front=='personal'){location.reload()}else{let dom=document.querySelector("#favorite_"+el.dataset.id);dom.classList.toggle("active")}})}));queryAll(".add-poll").forEach(el=>el.addEventListener("click",function(e){fetch("/poll",{method:"POST",headers:{'Content-Type':'application/x-www-form-urlencoded'},body:"question_id="+el.dataset.id+"&answer_id="+el.dataset.answer+"&_token="+token,}).then(response=>response.text()).then(text=>{location.reload()})}));delVotingOption.forEach(el=>el.addEventListener("click",function(e){makeRequest("/poll/option/del",options={body:"id="+el.dataset.id+"&_token="+token})}));queryAll(".add-ignore").forEach(el=>el.addEventListener("click",function(e){fetch("/ignored",{method:"POST",headers:{'Content-Type':'application/x-www-form-urlencoded'},body:"user_id="+el.dataset.id+"&_token="+token,}).then(response=>response.text()).then(text=>{location.reload()})}));queryAll(".comment-best").forEach(el=>el.addEventListener("click",function(e){fetch("/best",{method:"POST",headers:{'Content-Type':'application/x-www-form-urlencoded'},body:"comment_id="+el.dataset.id+"&_token="+token,}).then(response=>response.text()).then(text=>{let dom=document.querySelector("#best_"+el.dataset.id);dom.classList.toggle("active");location.reload()})}));queryAll("#graburl").forEach(el=>el.addEventListener("click",function(e){let uri=getById('link').value;if(uri===''){return}
fetch("/post/grabtitle",{method:"POST",body:"uri="+uri,headers:{'Content-Type':'application/x-www-form-urlencoded'}}).then(function(response){if(!response.ok){return Promise.reject(new Error('Response failed: '+response.status+' ('+response.statusText+')'))}
return response.json()}).then(function(data){document.querySelector('input[name=post_title]').value=data.title;document.querySelector('textarea.url').insertAdjacentHTML('afterBegin',data.description)}).catch(function(error){})}));const tabs_post=document.querySelector(".tabs-post");if(tabs_post){const tabButton=queryAll(".tab-button");const contents=queryAll(".content-tabs");tabs_post.onclick=e=>{const id=e.target.dataset.id;if(id){tabButton.forEach(btn=>{btn.classList.remove("active")});e.target.classList.add("active");contents.forEach(content=>{content.classList.remove("tab_active")});getById('inputQa').value=0;if(id=='qa'){getById('inputQa').value=1}
const element=getById(id);element.classList.add("tab_active")}}}